sudo: required
dist: trusty
group: edge

addons:
  sonarqube:
    organization: "guhilling-github"
    token:
      secure: "PIVBggt+JPplyg9oy6BZwQH2zHSFEsPdTlaJcXXEbnumfGzRbcq4Dr1FXzWn1ZOas9cPv0tG5YHbMhTYvettSLssAWI12LzgcjdvlqFrn4PYwa4zux+xJYxfgHdrIay6sm4FfS59ERz5oC8BBab5rxBCSWsONYrw0lO1esYw4Wk="

language: java
jdk:
  - oraclejdk7
  - oraclejdk8

env:
  - CDI=cdi-1.1
  - CDI=cdi-1.2
  - CDI=cdi-1.2b
  - CDI=cdi-2.0

matrix:
  exclude:
    - jdk: oraclejdk7
      env: CDI=cdi-2.0


script:
  - export JAVA_HOME=$(/usr/libexec/java_home) && mvn test -P${CDI} jacoco:report coveralls:report

cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'
